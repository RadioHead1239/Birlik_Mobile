@page "/home"
@inject AuthService AuthService
@inject NavigationManager NavManager

@code {
    protected override async Task OnInitializedAsync()
    {
        await AuthService.InitializeAsync();

        var rol = AuthService.CurrentUser?.Rol?.ToLowerInvariant();

        if (string.IsNullOrEmpty(rol))
        {
            NavManager.NavigateTo("/login", true);
            return;
        }

        switch (rol)
        {
            case "cliente":
                NavManager.NavigateTo("/cliente/dashboard", true);
                break;
            case "ejecutivo":
                NavManager.NavigateTo("/ejecutivo/dashboard", true);
                break;
            case "gerente":
                NavManager.NavigateTo("/gerente/dashboard", true);
                break;
        }
    }
}
