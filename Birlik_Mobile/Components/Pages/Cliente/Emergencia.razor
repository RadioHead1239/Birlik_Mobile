@page "/cliente/emergencia"
@inject NavigationManager Nav

<RoleGuard AllowedRole="Cliente">
    <div class="container mt-5 text-center">
        <h4 class="text-danger mb-3">
            <i class="bi bi-exclamation-triangle me-2"></i> Botón de Emergencia
        </h4>
        <p class="text-muted mb-4">
            Usa este botón solo en caso de accidente o situación urgente.
        </p>

        <button class="btn btn-danger btn-lg shadow" style="width: 220px; height: 220px; border-radius: 50%;"
                @onclick="EnviarAlerta">
            <i class="bi bi-telephone-outbound" style="font-size: 4rem;"></i>
            <div class="fw-bold mt-2">Llamar Asistencia</div>
        </button>

        <div class="mt-4">
            <button class="btn btn-outline-secondary btn-sm" @onclick="@(()=>Nav.NavigateTo("/cliente/dashboard"))">
                <i class="bi bi-arrow-left"></i> Volver
            </button>
        </div>
    </div>
</RoleGuard>

@code {
    private void EnviarAlerta()
    {
        // Aquí podrías invocar un método del ApiService para registrar una emergencia
        // await ApiService.ReportarEmergenciaAsync(AuthService.CurrentUser);
        Console.WriteLine("🚨 Emergencia enviada");
    }
}
